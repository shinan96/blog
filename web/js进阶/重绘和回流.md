## 重绘和回流

> 回流就是重排，为了与重绘区分

### 网页生成过程
1. HTML解析成dom树
2. css被解析成cssom树
3. 结合dom树和css树，生成渲染树`（render tree）`
4. 生成布局`（flow）`，即将所有渲染树的所有节点进行平面合成
5. 将布局绘制`（paint）`到屏幕上

第四步和第五不最耗时，合起来别成为`渲染`。

### 渲染
网页生成页面，至少会渲染一次。  
在用户访问过程中，还会不断重新渲染。

重新渲染就是继续第四步+第五步的操作，或只进行第五步操作。

### 重排比重绘大
* 重绘：某些元素的外观被改变，例如：元素的填充颜色
* 重排：重新生成布局，重新排列元素。

> "重绘"不一定会出现"重排"，"重排"必然会出现"重绘"

### 概念
> 重排：当dom的变化影响到元素的几何信息，浏览器需要重新计算元素的几何属性，放到正确的位置，叫重排。

1. 添加或者删除可见的DOM元素；
2. 元素尺寸改变——边距、填充、边框、宽度和高度
3. 内容变化，比如用户在input框中输入文字
4. 浏览器窗口尺寸改变——resize事件发生时
5. 计算 offsetWidth 和 offsetHeight 属性
6. 设置 style 属性的值

> 重绘：当一个元素的外观发生变化，但没有改变布局。重新把元素外观绘制出来的过程。


### 优化
1. 读写分离
2. 样式集中改变。
3. 使用定位元素。
4. 优化动画，尽量用css3写。
### 参考

1. [掌握浏览器重绘(repaint)重排(reflow))-前端进阶](https://segmentfault.com/a/1190000017491520)
